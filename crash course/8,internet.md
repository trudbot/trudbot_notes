# Internet
*局域网*
计算机近距离构成的小型网络叫局域网（Local Area Networks），简称LAN。

计算机为了获取互联网上的资源，首先要连到局域网（LAN），家庭中的 WiFi 路由器连着的所有设备组成了局域网。
局域网再连到广域网（Wide Area Network——WAN）
在广域网里，先连到一个区域性路由器，这个路由器可能覆盖一个街区。然后连到一个更大的WAN，可能覆盖整个城市。
可能再跳几次，但最终会到达互联网主干（the backbone of the internet），互联网主干由一群超大型，带宽超高路由器组成。
为了从互联网获取资源，数据包（packet）要先到互联网主干，沿着主干到达有对应资源的服务器，数据包从我们的计算机跳到有资源的服务器可能要跳个10次，先跳4次到达互联网主干，2次穿过主干，主干出来可能再跳4次，然后到达服务器。

**以太网**
> 以太网的最简单形式是：一条以太网电线连接数台计算机，当一台计算机要传数据给另一台计算机时，它以电信号形式将数据传入电缆，当然因为电缆是共享的，连在同一个网络里的其他计算机也能看得到数据.

为了把数据定向传输到目标计算机，以太网需要每台计算机有唯一的媒体访问控制地址（media access control address），简称MAC地址。

MAC地址作为传输数据的前缀，发送到网络中.

*载体*
载体（carrier）指运输数据的共享媒介，以太网的carrier是铜线，WiFi的carrier是传播无线电波的空气。

**数据传输中的冲突**
一根网线同一时间只能传输一组数据，当网络中同时有两台计算机想发送信息时，就会产生冲突。

当发生冲突时，计算机通常会等一会，再尝试发送数据。

*指数退避*
> 假设一台计算机在传输数据期间检测到collision，会等待1s+随机时间，然而如果再次发生collision表明网络拥塞，这次等待2s，如果再次发生collision则等待4s，然后8s，16s等等，直到成功传输。因为计算机的退避，collision次数降低了，数据再次开始流动起来，网络变得顺畅。这种指数级增长等待时间的方法叫做“指数退避”（exponential backoff）。以太网和WiFi都用这种方法，很多其他传输协议也用。

*冲突域*
为了减少collision并提高效率，我们需要减少同一carrier中设备的数量，carrier和其中的设备总称为“冲突域”（Collision Domain）。

*交换机*
以太网的例子：一根电缆连接6台计算机，也叫一个冲突域，为了减少collision，可以用交换机（network switch）把它拆成两个冲突域，交换机位于两个更小的网络之间，必要时才在两个网络之间传输数据。交换机会记录一个列表，写着哪个MAC地址在哪边网络。

```
graph TB
设备1---A(交换机)
设备2---A
设备3---A
A---设备4
A---设备5
```
如图，就可以实现类似设备1、2、3之间和设备4、5之间的数据传输能同时进行，而也能进行1、2、3与4、5之间的数据传输的效果。

**数据传输过程**
*路由（routing）
> 路由是指路由器从一个接口上收到数据包，根据数据包的目的地址进行定向并转发到另一个接口的过程。

*数据传输方法*
* 电路交换
   * > 假设 Indianapolis 和 missoula 之间有五条电话线，如果在1910年代，John想打电话给Hank，John要告诉操作员他想打到什么地方，然后工作人员手动将John的电话连到通往 missoula 的未使用线路，通话期间这条线就被占用了，如果五条线都被占用了，John要等待某条线空闲出来，这叫做“电路交换”（circuit switching），因为是把电路连接到正确目的地，能用但是不灵活而且价格昂贵，因为总有闲置的线路。好处是如果有一条属于自己的线路，你可以最大限度地随意使用而无需共享。因此军队，银行和其他一些机构依然会购买专用线路来连接数据中心。
* 报文交换
  * > 传输数据的另一个方法是“报文交换”（message switching），报文交换就像邮政系统一样，消息会经过好几个站点，每个站点都知道下一站发哪里，因为站点有表格，记录到各个目的地的message应该怎么传。报文交换的好处是可以用不同路由，使通信更可靠更能容错（fault-tolerant）。

  * 跳数(hop count)
消息沿着路由跳转的次数叫做“跳数”（hop count）,每经过一个路由器，跳数就加1。
如果某条数据的传输中跳数很高，有可能就是路由发生了错误。

  * 报文交换的缺点之一是有时候message比较大，会堵塞网络，因为要把整个message从一站传到下一站后才能继续传递其他message。传输一个大文件时整条路都堵塞了，即便你只有一个1KB的电子邮件要传输，也只能等大文件传完，或者是选另一条效率较低的路线。**解决方法是将大报文分成很多小块，叫做“数据包”（packets），就像报文交换一样，每个packet都有目标地址，因此路由器（routers）知道发到哪里。**

* 分组交换
  * > 分组交换也称包交换，它是将用户传送的数据划分成多个更小的等长部分，每个部分叫做一个数据段。在每个数据段的前面加上一些必要的控制信息组成的首部，就构成了一个分组。首部用以指明该分组发往何地址，然后由交换机根据每个分组的地址标志，将他们转发至目的地，这一过程称为分组交换。

### 协议 protocol
协议，网络协议的简称，网络协议是通信计算机双方必须共同遵从的一组约定。如怎么样建立连接、怎么样互相识别等。只有遵守这个约定，计算机之间才能相互通信交流。它的三要素是：语法、语义、时序。
为了使数据在网络上从源到达目的，网络通信的参与方必须遵循相同的规则，这套规则称为协议（protocol），它最终体现为在网络上传输的数据包的格式。
协议往往分成几个层次进行定义，分层定义是为了使某一层协议的改变不影响其他层次的协议。

**互联网协议 Internet Protocol——IP**

IP协议，主要负责通过网络连接在数据源主机和目的主机间传送数据包。

*IP地址*
IP地址是IP协议提供的一种统一的地址格式，它为互联网上的每一个**网络**和每一台**主机**分配一个逻辑地址，以此来屏蔽物理地址的差异。

IP通过多种属性来定义数据是如何被传输的，如主机寻址（数据包的头部为目标地址）。

有了IP协议，数据包就能准确发送到目标设备。

**用户数据包协议 User Datagram Protocol——UDP**

UDP 也有头部，这个头部位于数据前面，头部里包含有用的信息，信息之一是端口号，每个想访问网络的程序都要向操作系统申请一个端口号

有了UDP，计算机接收的数据包就能准确的交给请求数据的程序。

UDP 头部里还有“校验和”，用于检查数据是否正确，正如“校验和”这个名字所暗示的一样，检查方式是把数据求和来对比。例如，在发送数据包前，电脑会把所有数据加在一起算出“校验和”，在 UDP 中“校验和”以16位形式存储，如果算出来的和超过了16位所能表示的最大值，高位数会被扔掉，保留低位；当接收方电脑收到这个数据包，它会重复这个步骤把所有数据加在一起，如果结果和头部中的校验和一致则代表一切正常，如果不一致则是数据被损坏了，也许是传输时碰到了功率波动，或者是电缆出现了故障。
***
*总结：IP 负责把数据包送到正确的计算机，UDP 负责把数据包送到正确的程序。*
***
**传输控制协议 Transmission Control Protocol——TCP**
UDP 不提供数据修复或者数据重发的机制，接收方知道数据损坏后一般只是扔掉，而且 UDP 无法得知数据包是否到达，发送方发了之后无法知道数据包是否到达目的地。

要实现所有数据必须到达的美好愿望，就需要用“传输控制协议”（Transmission Control Protocol——TCP）。TCP 和 UDP 一样，头部也在存数据前面，因此人们称这个组合为 TCP/IP。

就像 UDP 一样，TCP 头部也有端口号和校验和，但是 TCP 有更高级的功能，介绍重要的几个：

TCP 数据包有序号：15号之后是16号，16号之后是17号，以此类推，发上百万个数据包也是可能的。序号使接收方可以把数据包排成正确顺序，即使到达时间不同，哪怕到达顺序是乱的，TCP 协议也能把顺序排对。

TCP 要求接收方的电脑收到数据包并且校验和检查无误之后（数据没有损坏）给发送方发一个确认码（acknowledgement——ACK），表示收到了。得知上一个数据包成功抵达后，发送方会发下一个数据包，假设这次发出去之后没有收到确认码，那肯定是哪里出现了错误，如果过了一定时间还没有收到确认码，发送方会再发一次。注意：数据包可能确实到达了，只是确认码延误了很久或者是传输中丢失，但是由于收件方有序列号，如果收到重复的数据包就会 be discarded。

TCP 不是只能一个包一个包发送，可以同时发多个数据包，收到多个确认码，这大大增加了效率，不用浪费时间等待确认码。

Interestingly，确认码的成功率和来回时间可以推测网络的拥堵程度，TCP 用这个信息来调整同时发包的数量，解决拥堵问题。

TCP 可以处理乱序和丢失数据包，丢了就重新发送，还可以根据拥挤情况自动调整传输率。

TCP 最大的缺点是确认码数据包把数量翻了一倍，但是并没有传输更多的信息。有时候这种代价是不值得的，特别是对时间要求很高的程序，例如在线射击游戏。

***
**域名系统 Domain Name System——DNS**
当计算机访问一个网站时需要两个东西：IP 地址（IP address）和端口号（port）。
如在浏览器输入谷歌的IP地址和端口 172.217.7.238:80，就可以访问谷歌主页。

这种方式太麻烦、难记，因此，人们发明了域名(Domain Name)。

域名可将一个IP地址关联到一组有意义的字符上去。用户访问一个网站的时候，既可以输入该网站的IP地址，也可以输入其域名，对访问而言，两者是等价的。

> 域名系统的运作原理：在浏览器里输入 youtube.com，浏览器会去问 DNS 服务器它的 IP 地址是多少，一般 DNS 服务器是互联网供应商提供的，DNS 会查表，如果域名存在就会返回对应的 IP 地址，如果是乱敲出来的一个网站则很可能会看到 DNS 错误，因为那个网站不存在，所以 DNS 无法返回给你一个 IP 地址，如果输入的是有效地址，DNS 按理会返回一个地址，然后浏览器会给这个 IP 地址发 TCP 请求。

*域名级数*
域名级数是指一个域名由多少级组成，域名的各个级别被“.”分开，最右边的那个词称为顶级域名。
顶级域名，又称一级域名，常见的有".com"、".org"、".net"、".cn"等。
"二级域名"就是在一级域名前再加一级，如"baidu.com"。
二级域名以上级别的域名，统称为子域名，不在“注册域名”的范畴中。

**开放系统互连参考模型**
开放系统互连参考模型 (Open System Interconnect 简称OSI）是国际标准化组织(ISO)和国际电报电话咨询委员会(CCITT)联合制定的开放系统互连参考模型，为开放式互连信息系统提供了一种功能结构的框架。它从低到高分别是：**物理层、数据链路层、网络层、传输层、会话层、表示层和应用层。**

### 万维网（World Wide Web）

> WWW是基于客户机/服务器方式的信息发现技术和超文本技术的综合。WWW服务器通过超文本标记语言(HTML)把信息组织成为图文并茂的超文本，利用链接从一个站点跳到另个站点。这样一来彻底摆脱了以前查询工具只能按特定路径一步步地查找信息的限制

万维网（World Wide Web）和互联网（Internet）不同，万维网在互联网之上运行，互联网之上还有Skype，Minecraft和Instagram，互联网是传递数据的管道，各种程序都会用，其中传输最多数据的程序是万维网，分布在全球数百万个服务器上，可以用“浏览器”来访问万维网。

**超文本**

> 超文本是用超链接的方法，将各种不同空间的文字信息组织在一起的网状文本。

超文本（Hypertext）是由一个叫做网页浏览器（Web browser）的程序显示。网页浏览器从网页服务器取回称为“文档”或“网页”的信息并显示。通常是显示在计算机显示器。人可以跟随网页上的超链接（Hyperlink），再取回文件，甚至也可以送出数据给服务器。顺着超链接走的行为又叫浏览网页。相关的数据通常排成一群网页，又叫网站

**统一资源定位器 Uniform Resource Locator**
即url.

如其名，url是网页的地址，人们可以通过url来定位一个网页。

注意，域名是由一串用点分隔的名字组成的Internet上某一台计算机或计算机组的名称；URL是统一资源定位符，对可以从互联网上得到的资源的位置和访问方法的一种简洁的表示，是互联网上标准资源的地址。

即url中包含了网站的域名。

如，https://www.baidu.com/ 是url
而，baidu.com是根域名
www.baidu.com是子域名

**超文本传输协议（Hyper Text Transfer Protocol，HTTP）**

> 超文本传输协议（Hyper Text Transfer Protocol，HTTP）是一个简单的**请求-响应协议**，它通常运行在TCP之上。它指定了客户端可能发送给服务器什么样的消息以及得到什么样的响应。请求和响应消息的头以ASCII形式给出；而消息内容则具有一个类似MIME的格式。这个简单模型是早期Web成功的有功之臣，因为它使开发和部署非常地直截了当。

**超文本标记语言 (Hypertext Markup Language,HTML)**

> HTML是一种建立网页文件的语言，通过标记式的指令(Tag)，将影像、声音、图片、文字动画、影视等内容显示出来。

HTML文件也就是网页，通过web browser查看。

**网页浏览器 web browsers**
网页浏览器（web browsers）可以和网页服务器沟通，浏览器不仅获取网页和媒体，获取后还负责显示。第一个浏览器和服务器是Tim Berners-Lee在1990年写的，为了做出来，他同时建立了几个最基本的网络标准：URL，HTML和HTTP。万维网就此诞生，重要的是，万维网有开放标准，大家都可以开发新服务器和新浏览器。

**搜索引擎**

> 搜索引擎是指根据一定的策略、运用特定的计算机程序从互联网上采集信息，在对信息进行组织和处理后，为用户提供检索服务，将检索的相关信息展示给用户的系统。

**网络中立性(Net Neutrality)**

> 所谓“网络中立性”(Net Neutrality)，是关于网络在作为一个应用程序层的操作平台上的一些原则，引用Wikipedia的话来说，这些原则就是“非歧视性的互联互通”，是指网络运营者（所有者）不得通过调整网络配置使服务产生差别，即平等对待所有使用该网络的用户。

例如，不得以更快的速度传输自己的服务，也不得以类似的高速传输服务向网络内容提供商和网络应用提供商额外收取费用。
