# ALU
> ALU 是计算机的大脑，也是现代计算机的基石，基本上计算机所有的操作运算都会用到它。

ALU由算术单元和逻辑单元组成

### 算术单元

**半加器**

之所以叫作半加器，是因为没有考虑前一位运算的进位，
所以只能用于一位的二进制数字运算

加数A|被加数B|进位carry|和数sum
:-:|:-:|:-:|:-:  
0|0|0|0
0|1|0|1
1|0|0|1
1|1|1|0

半加器可以由一个异或门和一个与门实现
* 异或门用来计算和数sum
* 与门用来判断是否要进位

```
graph LR
A--> XOR
A-->And
B--> XOR
B-->And
XOR --> SUM
And--> carry
```
将半加器抽象为
```
graph LR
A--> X(Half Adder  )
B-->X
X-->C
X-->S

```
**全加器**

全加器与半加器最大的不同是多了一个参数：低位运算的进位信号

A|B|C0|carry|sum
--|--|:--:|:--:|:--:
0|0|0|0|0
1|0|0|0|1
0|1|0|0|1
0|0|1|0|1
1|1|0|1|0
1|0|1|1|0
0|1|1|1|0
1|1|1|1|1

全加器可以用两个半加器及一个或门实现
```
graph LR
A--> X(Half Adder  )
B-->X
X-->C1
X-->S1
C0-->X1(Half Adder)
S1-->X1
X1-->Sum
X1-->C2
C1-->OR
C2-->OR
OR-->Carry
```
* 其本质就是用两个半加器来计算三个只有一位的二进制数字的和
* A、B为本位的两个数
* C0为上一位运算所产生的进位
* 由于进位可能由A、B相加时产生，也可能由C0与AB和相加产生，所以用或门来判断进位

运用多个全加器即可实现二进制数的相加
***
当两个数之和太大，超过了规定位数（如两个8位二进制数相加，最后一位相加产生进位），这种情况叫做‘溢出’
解决溢出的办法是使用更高位的加法器

ALU的算术单元还能继续更多的操作
* 减法
* 加一
* 减一
* 不变通过


### 逻辑单元
逻辑单元在计算机内负责执行逻辑操作。比如之前说的“与”，“或”，“非”，“异或”。另外，它还能做简单的数值测试，比如利用许多个“或门”，来检测一个8位数字是否为“0”

### ALU抽象
```
graph LR
inputA-->ALU
inputB-->ALU
操作码-->ALU
ALU-->|算术单元产生|output
ALU-->|逻辑单元产生|flags,1/0表示状态真假.....
flags-->overflow,是否溢出...
flags-->zero,是否为0...
flags-->negative,是否为负...