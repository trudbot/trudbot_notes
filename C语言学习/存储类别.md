# 存储类别
**基础知识——作用域**
作用域描述程序中可访问标识符的区域。

* 代码块作用域：即花括号内，如函数体，循环体。

* 函数作用域：函数作用域仅用于goto语句的标签，这意味着即使一个标签首次出现在函数的内层块中，它的作用域也延伸至整个函数。

* 函数原型作用域：在函数原型中声明的标识符的作用域是原型作用域。从声明开始，到有小括号结束。（只是函数原型声明时，定义时的形参属于代码块作用域）

* 文件作用域：任何在代码块之外声明的标识符都具有文件作用域。但是在同文件中编写的通过include指令包含到其他文件中的声明，就好像直接写在那些文件中一样，它们的作用域不限于头文件的文件尾。

**基础知识——链接性**
链接性是一个链接时的概念，用来定义对象是否能被跨文件访问，或者只能在一个文件中访问。

无链接性：除了文件作用域的变量，其他作用域的变量均属于无链接性，它们只能够从函数内部被访问

外部链接性：能够被多个文件访问

内部链接性：该变量只能够在被声明的文件中被访问

文件作用域的变量可以是外部链接性，也可以是内部链接性

**基础知识——存储期**

作用域和链接描述了标识符的可见性，存储期描述了通过这些标识符访问的对象的生存期。

静态存储——文件作用域变量具有静态存储期。
线程存储期——用于并发程序设计，程序执行可被分为多个线程。具有线程存储期的对象，从被声明时到线程结束一直存在。
自动存储期——块作用域的变量一般具有自动存储期。当程序进入定义这些变量的块时，为这些变量分配内存；当退出这个块时，释放刚才为变量分配的内存。
动态分配存储期


**存储类别(storage class)**
C语言中的四种存储类别： 自动变量 （auto）、静态变量（static）、寄存器（register）、外部变量 （extern）。
在声明变量的语句前加上这四种存储符即可指定变量的存储类型

*auto*
即局部变量，在函数或代码块内的变量一般都是auto类型，只能用在函数内部。当程序进入了它们所在的函数中时才会创建它们，而当退出这个函数时，它们也会随之被销毁。

*static*
怎么知道一个具有文件作用域的变量是内部链接性还是外部链接性？
——查看外部定义中是否使用了存储类别说明符static。
```
int i; //外部链接性
static int j; //内部链接性
int main(void)
……
```
static即为静态变量， 将变量声明为静态变量的同时会将变量的链接性定为internal
静态变量在函数结束后不会被销毁，而会保留原值
```
include <stdio.h>

void f(void)
{
    static int i = 100;
    i++;
    printf("%d ", i);
}

int main(void)
{
    f();
    f();
    f();
}
//output:101 102 103
```
*extern*

extern声明了一个外部变量，该外部变量在其他程序文件中定义。通过该声明，在该文件中，可以引用该变量(该变量的定义在其它文件中)。因为该变量在其它文件中定义，而在该文件中只是进行声明，因此，**不能在声明的时候进行初始化**

*register*
寄存器变量
为提高效率,C 语言允许将局部变量的值存放在 CPU 的寄存器中,这种变量叫做寄存器变量,用关键字 register 声明。使用寄存器变量需要注意以下几点: 
(1)只有局部自动变量和形式参数可以作为寄存器变量。 
(2)一个计算机系统中的寄存器数目有限,不能定义任意多个寄存器变量。 
(3)不能使用取地址运算符“&”求寄存器变量的地址。
通常，register类型的变量通常用于经常被访问的变量，比如计数器。
